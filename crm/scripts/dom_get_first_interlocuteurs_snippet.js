(()=>{const s=Date.now(),t=2e4,i=setInterval(()=>{let f=!1;(function e(n){n.shadowRoot&&e(n.shadowRoot),n.querySelectorAll?.('span').forEach(x=>{/clients\s+trouvés/i.test(x.textContent.trim())&&(f=!0)}),n.childNodes.forEach(e)})(document);if(f){clearInterval(i);console.info('✅ clients trouvés, run...');const a=new Set;(function e(n){n.shadowRoot&&e(n.shadowRoot),n.querySelectorAll?.('.listResults .result').forEach(a.add,a),n.childNodes.forEach(e)})(document);const l=[...a];if(!l.length)return console.warn('no result');const d=l.map(r=>({n:r.querySelector('.resultName')?.textContent.trim(),a:[...r.querySelectorAll('.resultAdresse')].map(x=>x.textContent.trim()).join(', '),s:r.querySelector('.resultSiret')?.textContent.trim(),m:r.querySelector('.resultMarche')?.textContent.trim(),g:r.querySelector('.resultSiege')?.textContent.trim()||'Non',t:r.querySelector('.resultInseeStatus')?.textContent.trim()})),u=[...new Map(d.map(o=>[o.n+o.s,o])).values()];console.table(u);try{prompt('📋 PREFETCH: Ctrl+C puis Entrée',JSON.stringify(u));}catch(_e){};l[0].click();console.info('clicked:',u[0])}else Date.now()-s>t&&(clearInterval(i),console.warn('❌ pas trouvé après 20s'))},500)})();
